#!/usr/bin/env ruby
require File.dirname(__FILE__) + '/../lib/green_shoes'

arg = ARGV[0]
path = File.expand_path(arg.gsub(/\\/, "/"))
ARGV[0] = path

case
when path =~ /\.gsy$/
  base = File.basename(path, ".gsy")
  tmpdir = "%s/shoes-%s.%d" % [Dir.tmpdir, base, $$]
  shy = Shy.x(path, tmpdir)
  Dir.chdir(tmpdir)
  p "Loaded GSY: #{shy.name} #{shy.version} by #{shy.creator}"
  load File.join(tmpdir, shy.launch)
when arg == '-m'
  Shoes.show_manual
when arg == '-mj'
  Shoes.show_manual 'Japanese'
else
  load path
end
